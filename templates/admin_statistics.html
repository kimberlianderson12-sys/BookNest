{% extends "base.html" %}

{% block title %}–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ - BookNest{% endblock %}

{% block content %}
<div class="admin-page">
    <h1>–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h1>
    
    <div class="stats-grid" style="margin-bottom: 2rem;">
        <div class="stat-card">
            <div class="stat-icon">üìö</div>
            <div class="stat-info">
                <h3>{{ stats.total_books }}</h3>
                <p>–í—Å–µ–≥–æ –∫–Ω–∏–≥</p>
            </div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon">üìñ</div>
            <div class="stat-info">
                <h3>{{ stats.total_copies }}</h3>
                <p>–í—Å–µ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤</p>
            </div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon">‚úÖ</div>
            <div class="stat-info">
                <h3>{{ stats.available_copies }}</h3>
                <p>–î–æ—Å—Ç—É–ø–Ω–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤</p>
            </div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon">üë•</div>
            <div class="stat-info">
                <h3>{{ stats.total_users }}</h3>
                <p>–í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</p>
            </div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon">üë§</div>
            <div class="stat-info">
                <h3>{{ stats.total_readers }}</h3>
                <p>–ß–∏—Ç–∞—Ç–µ–ª–µ–π</p>
            </div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon">üìã</div>
            <div class="stat-info">
                <h3>{{ stats.total_reservations }}</h3>
                <p>–í—Å–µ–≥–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π</p>
            </div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon">‚è≥</div>
            <div class="stat-info">
                <h3>{{ stats.active_reservations }}</h3>
                <p>–ê–∫—Ç–∏–≤–Ω—ã—Ö –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π</p>
            </div>
        </div>
    </div>
    
    {% if stats.popular_books %}
    <div class="search-filters" style="margin-bottom: 2rem;">
        <h2 style="margin-bottom: 1rem; color: #CF9D7B;">–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∫–Ω–∏–≥–∏</h2>
        <table class="reservations-table">
            <thead>
                <tr>
                    <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                    <th>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π</th>
                    <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                </tr>
            </thead>
            <tbody>
                {% for book in stats.popular_books %}
                <tr>
                    <td>{{ book[1] }}</td>
                    <td>{{ book[2] }}</td>
                    <td><a href="{{ url_for('book_detail', book_id=book[0]) }}" class="btn btn-sm btn-primary">–ü—Ä–æ—Å–º–æ—Ç—Ä</a></td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% endif %}
    
    {% if stats.genre_stats %}
    <div class="search-filters" style="margin-bottom: 2rem;">
        <h2 style="margin-bottom: 1rem; color: #CF9D7B;">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∂–∞–Ω—Ä–∞–º</h2>
        <table class="reservations-table">
            <thead>
                <tr>
                    <th>–ñ–∞–Ω—Ä</th>
                    <th>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–Ω–∏–≥</th>
                </tr>
            </thead>
            <tbody>
                {% for genre in stats.genre_stats %}
                <tr>
                    <td>{{ genre[0] }}</td>
                    <td>{{ genre[1] }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% endif %}
    
    {% if stats.author_stats %}
    <div class="search-filters" style="margin-bottom: 2rem;">
        <h2 style="margin-bottom: 1rem; color: #CF9D7B;">–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∞–≤—Ç–æ—Ä—ã</h2>
        <table class="reservations-table">
            <thead>
                <tr>
                    <th>–ê–≤—Ç–æ—Ä</th>
                    <th>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–Ω–∏–≥</th>
                </tr>
            </thead>
            <tbody>
                {% for author in stats.author_stats %}
                <tr>
                    <td>{{ author[0] }} {{ author[1] }}</td>
                    <td>{{ author[2] }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% endif %}
    
    {% if stats.reservation_status %}
    <div class="search-filters" style="margin-bottom: 2rem;">
        <h2 style="margin-bottom: 1rem; color: #CF9D7B;">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π</h2>
        <table class="reservations-table">
            <thead>
                <tr>
                    <th>–°—Ç–∞—Ç—É—Å</th>
                    <th>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</th>
                </tr>
            </thead>
            <tbody>
                {% for status in stats.reservation_status %}
                <tr>
                    <td>
                        {% if status[0] == 'reserved' %}–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–æ
                        {% elif status[0] == 'issued' %}–í—ã–¥–∞–Ω–æ
                        {% elif status[0] == 'returned' %}–í–æ–∑–≤—Ä–∞—â–µ–Ω–æ
                        {% elif status[0] == 'cancelled' %}–û—Ç–º–µ–Ω–µ–Ω–æ
                        {% else %}{{ status[0] }}{% endif %}
                    </td>
                    <td>{{ status[1] }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% endif %}
    
    {% if stats.user_roles %}
    <div class="search-filters">
        <h2 style="margin-bottom: 1rem; color: #CF9D7B;">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ä–æ–ª—è–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h2>
        <table class="reservations-table">
            <thead>
                <tr>
                    <th>–†–æ–ª—å</th>
                    <th>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</th>
                </tr>
            </thead>
            <tbody>
                {% for role in stats.user_roles %}
                <tr>
                    <td>
                        {% if role[0] == 'reader' %}–ß–∏—Ç–∞—Ç–µ–ª—å
                        {% elif role[0] == 'librarian' %}–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ä—å
                        {% elif role[0] == 'admin' %}–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
                        {% else %}{{ role[0] }}{% endif %}
                    </td>
                    <td>{{ role[1] }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% endif %}
</div>
{% endblock %}

